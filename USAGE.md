# 使用说明

## 快速开始

1. **安装依赖**（已完成）
   ```bash
   npm install
   ```

2. **启动应用**
   ```bash
   npm start
   ```

## 功能说明

### 主要功能
- **人脸检测**: 使用 face-api.js 库实时检测摄像头中的人脸
- **自动亮度控制**: 检测到人脸时自动降低屏幕亮度到设定值
- **实时预览**: 在视频上绘制检测到的人脸框

### 设置选项

1. **检测间隔**
   - 默认: 1000 毫秒
   - 范围: 500-5000 毫秒
   - 说明: 控制人脸检测的频率，值越小检测越频繁（更耗电）

2. **最低亮度**
   - 默认: 10%
   - 范围: 0-100%
   - 说明: 检测到人脸时屏幕亮度会降至此值

3. **触发人脸数量阈值**
   - 默认: 2 张
   - 范围: 1-10 张
   - 说明: 只有当检测到的人脸数量达到或超过此值时才会降低亮度。默认为2是因为用户自己在使用笔记本时已经有1张人脸了

## 使用流程

1. 点击"启动检测"按钮
2. 允许浏览器访问摄像头（首次使用需要授权）
3. 应用会自动加载人脸检测模型
4. 开始实时检测人脸：
   - **检测到人脸** → 屏幕亮度降低至设定的最低值
   - **无人脸** → 屏幕亮度恢复正常
5. 点击"停止检测"结束

## 注意事项

### 首次运行
- 应用启动时会自动加载人脸检测模型（TinyFaceDetector 和 SSD MobileNet）
- 模型文件已包含在 `@vladmandic/face-api` npm 包中
- 加载完成后状态会显示"模型加载完成"

### 摄像头权限
- Windows 系统需要在系统设置中允许应用访问摄像头
- 首次运行时会弹出权限请求，请点击"允许"

### 亮度控制
- 使用 `brightness` npm 包控制屏幕亮度
- 支持 Windows/macOS/Linux 系统
- Windows 上某些显示器可能不支持软件调节亮度

## 技术栈

- **Electron**: 桌面应用框架
- **@vladmandic/face-api**: 人脸检测库
- **brightness**: 跨平台亮度控制
- **原生 HTML/CSS/JavaScript**: UI 界面

## 开发计划

- [x] 基础项目搭建
- [x] 人脸检测集成
- [x] 亮度控制实现
- [ ] 添加系统托盘功能
- [ ] 开机自启动选项
- [ ] 性能优化
- [ ] 打包为安装程序

## 故障排查

### 模型加载失败
如果看到"模型加载失败"提示：
1. 检查 `node_modules/@vladmandic/face-api/model` 目录是否存在
2. 重新安装依赖: `npm install`
3. 确认 `@vladmandic/face-api` 包已正确安装

### 摄像头无法访问
1. 检查系统摄像头权限设置
2. 确保没有其他程序占用摄像头
3. 重启应用

### 亮度控制无效
1. 某些外接显示器可能不支持软件调节亮度
2. 尝试在笔记本电脑的内置屏幕上测试
3. 检查控制台是否有错误信息

## 后续开发

如需迁移到 Vue + Electron，可以：
1. 使用 `electron-vite` 或 `electron-builder` 脚手架
2. 将现有逻辑迁移到 Vue 组件
3. 保持 main.js 和 IPC 通信逻辑不变
